from typing import Any

from starlette.responses import JSONResponse

from {{ project_slug }}.core.constants import StatusEnum
from {{ project_slug }}.schema.base import BaseResponseSchema


class APIResponse(JSONResponse):
	def __init__(
		self,
		status: StatusEnum,
		message: str,
		data: Any | None = None,
		status_code: int = 200,
		headers: dict[str, Any] | None = None,
	):
		content = BaseResponseSchema(
			status=status,
			message=message,
			data=data,  # type: ignore
		).model_dump(exclude_none=True)
		super().__init__(content=content, status_code=status_code, headers=headers)


class ResponseUtils:
	@staticmethod
	def create_error_response(status_code: int, message: str) -> APIResponse:
		return APIResponse(status=StatusEnum.ERROR, message=message, status_code=status_code)

	@staticmethod
	def create_success_response(
		message: str,
		data: dict[str, Any] | list[dict[str, Any]] | None = None,
	) -> APIResponse:
		return APIResponse(status=StatusEnum.SUCCESS, message=message, data=data)
