"""Tests for health check endpoints."""

import pytest
from httpx import AsyncClient


class TestHealth:
	"""Test cases for health check endpoints."""

	@pytest.mark.asyncio
	async def test_health_endpoint(self, client: AsyncClient) -> None:
		"""Test the health check endpoint."""
		response = await client.get("/health")
		assert response.status_code == 200
		data = response.json()
		assert "status" in data
		assert data["status"] == "healthy"

	@pytest.mark.asyncio
	async def test_health_endpoint_with_database(self, client: AsyncClient{% if database %}, db_session{% endif %}) -> None:
		"""Test health check with database connectivity."""
		response = await client.get("/health")
		assert response.status_code == 200
		data = response.json()
		assert "status" in data
		assert data["status"] == "healthy"
		{% if database %}
		# Test database connectivity
		assert "database" in data
		assert data["database"] == "healthy"
		{% endif %}
